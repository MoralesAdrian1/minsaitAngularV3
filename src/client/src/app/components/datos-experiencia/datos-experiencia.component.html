<div class="container">
    <br />
    <div class="row g-3">
        <!-- Parte Izquierda - Formulario -->
        <div class="col-md-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title" class="text-dart">Agregar/Editar Perfiles</h5>

                    <form [formGroup]="datosExForm" (ngSubmit)="agregarDatosEx()">
                        <div class="form-group">
                            <label for="username" class="text-dart">Nombre de Usuario</label>
                            <input type="text" class="form-control" id="username" name="username"
                                formControlName="username" required />
                        </div>


                        <div formArrayName="datosEmpresa">
                            <div *ngFor="let idiomaGroup of datosEmpresa.controls; let i = index" class="form-group"
                                [formGroupName]="i">
                                <label class="text-dart">Empresa {{ i + 1 }}</label>
                                <input type="text" class="form-control" formControlName="nombreEmpresa" required />
                                <Label class="text-dart">Cargo Desempe√±ado</Label>
                                <input type="text" class="form-control" formControlName="puesto" required />
                                <Label class="text-dart">Fecha de Inicio</Label>
                                <input type="date" class="form-control" formControlName="fechaInicio" required />
                                <Label class="text-dart">Fecha de Fin</Label>
                                <input type="date" class="form-control" formControlName="fechaFin" required />

                            </div>
                        </div>


                        <button type="button" class="btn btn-primary" (click)="agregarEmpresa()">
                            Agregar Datos de Empresa
                        </button>
                        <p></p>
                        <div class="btn-group mt-2">
                            <button type="submit" class="btn btn-primary">Agregar</button>
                            <button type="button" class="btn btn-success ms-2" (click)="actualizarDatosEx()">
                                Actualizar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Parte Derecha - Tabla -->
        <!-- Parte Derecha - Tabla -->
        <div class="col-md-8">
            <table class="table table-striped table-hover">
                <thead>
                    <tr class="table-primary">
                        <th scope="col">Nombre de Usuario</th>
                        <th scope="col">Empresas</th>
                        <th scope="col">Editar/Eliminar</th>
                    </tr>
                </thead>
                <tbody id="datosP-table-body">
                    <tr *ngFor="let item of datosEx">
                        <td>{{ item.username }}</td>
                        <td>
                            <ul>
                                <li *ngFor="let datosEmpresa of item.datosEmpresa">
                                    Nombre Empresa{{ datosEmpresa.nombreEmpresa }} 
                                    <br>
                                    puesto: ({{ datosEmpresa.puesto }})
                                    <br>
                                    Fecha Inicio: ({{ datosEmpresa.fechaInicio }})
                                    <br>
                                    Fecha Fin: ({{ datosEmpresa.fechaFin }})
                                </li>
                            </ul>
                        </td>
                        <td>
                            <button class="btn btn-sm ms-2 btn-primary" (click)="editarDatosEx(item)">
                                <i class="fa fa-edit"></i>
                            </button>
                            <button type="button" class="btn btn-danger btn-sm ms-2" (click)="eliminarDatosEx(item._id)">
                                <i class="fa fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/flatly/bootstrap.min.css"
            integrity="sha384-qF/QmIAj5ZaYFAeQcrQ6bfVMAh4zZlrGwTPY7T/M+iTTLJqJBJjwwnsE5Y0mV7QK"
            crossorigin="anonymous" />
    </div>
</div>